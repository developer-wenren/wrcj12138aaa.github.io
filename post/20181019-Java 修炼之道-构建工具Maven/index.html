<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Java 修炼之道:Maven | 闻人的技术博客</title>
<meta name="description" content="做一个终生学习的技术人">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://wrcj12138aaa.github.io//favicon.ico?v=1574522179527">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://wrcj12138aaa.github.io//styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://wrcj12138aaa.github.io/">
        <img src="https://wrcj12138aaa.github.io//images/avatar.png?v=1574522179527" class="site-logo">
        <h1 class="site-title">闻人的技术博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      做一个终生学习的技术人
    </div>
    <div class="site-footer">
       | <a class="rss" href="https://wrcj12138aaa.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Java 修炼之道:Maven</h2>
            <div class="post-date">2018-10-19</div>
            
            <div class="post-content">
              <h2 id="前言">前言</h2>
<p>构建工具出现主要目的就是为了提高开发协作速度和项目构建效率. 而Maven 是目前主流的构建工具, <strong>约定优于配置</strong>的原则备受推崇. Maven会对项目构建的生命周期,项目结构等按照约定的规范去实现, 但也提供了打破默认约定配置的方法.</p>
<p>Maven 构建工具,功能也很强大有</p>
<ul>
<li>依赖管理</li>
<li>规范目录结果</li>
<li>完整的项目构建阶段</li>
<li>支持丰富插件</li>
<li>方便集成</li>
</ul>
<h2 id="正文">正文</h2>
<h3 id="pom-文件">POM 文件</h3>
<p>Maven 基于 POM (Project Object Model) 进行组织项目的.项目的所有配置信息都会被放置在 pom.xml 文件中,包括项目类型,名字,依赖关系,插件等.</p>
<pre><code class="language-xml">&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;
  &lt;artifactId&gt;my-app&lt;/artifactId&gt;
  &lt;version&gt;1&lt;/version&gt;
&lt;/project
</code></pre>
<p>在 Pom.XML 文件中主要节点有:</p>
<ul>
<li>
<p>groupId:artifactId:version 来标识Maven 工程唯一的版本,</p>
</li>
<li>
<p>package 表示打包方式,常用的就jar,pom, war 这三种.</p>
</li>
<li>
<p>propertie 配置全局属性</p>
</li>
<li>
<p>depenencies 管理依赖</p>
</li>
<li>
<p>plugins 管理插件</p>
</li>
<li>
<p>resources  管理资源</p>
</li>
<li>
<p>modules 管理项目模块</p>
</li>
</ul>
<p>POM 文件还支持继承,前提是父项目的 POM 文件 package 值为parent,然后在父 POM文件中完成统一配置管理, 其中子 POM中配置级别高于父 POM.</p>
<pre><code class="language-xml">&lt;project&gt;
  &lt;parent&gt;
    &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;
    &lt;artifactId&gt;my-app&lt;/artifactId&gt;
    &lt;version&gt;1&lt;/version&gt;
	&lt;relativePath&gt;../parent/pom.xml&lt;/relativePath&gt;
  &lt;/parent&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;
  &lt;artifactId&gt;my-module&lt;/artifactId&gt;
  &lt;version&gt;1&lt;/version&gt;
&lt;/project&gt;
</code></pre>
<p>Maven 的依赖管理通过 <code>&lt;dependencis&gt;</code>来定义, 一项 jar 依赖由 groupId:artifactId:version 标识; 项目的所有依赖呈现树状结构,采用就近原则,离最近的依赖优先级高.</p>
<p>编译是否参与编译部署可用参数 scope 指定,它值只有complie, test, provide, system,import 这5种,默认为 complie.</p>
<h3 id="项目构建流程">项目构建流程</h3>
<p>基于约定由于配置原则, Maven 的构建生命周期内置有 default, clean,site三种;default处理项目部署, clean来清理项目, site处理项目相关的文档创建.</p>
<p>Maven 的一个构建生命周期是由多个不同的构建阶段组成的.比如 default 生命周期的构建阶段有下面7个:</p>
<ul>
<li><code>validate</code> - 确定项目是正确的，</li>
<li>`compile  - 编译项目的源代码</li>
<li><code>test</code> - 使用合适的单元测试框架测试编译的源代码。</li>
<li><code>package</code>  - 采用编译的代码，并将其打包成可发布格式，例如 JAR</li>
<li><code>verify</code> - 对集成测试结果进行检查</li>
<li><code>install</code>   - 将软件包安装到本地存储库，作为本地其他项目的依赖项使用</li>
<li><code>deploy</code>  - 在构建环境中完成，将最终包复制到远程存储库，以便与其他开发人员和项目共享</li>
</ul>
<p>这些生命周期阶段的执行顺序固定,不会出现错误.</p>
<h3 id="多环境资源管理profile">多环境资源管理Profile</h3>
<p>profile 解决根据不同环境而打包不同文件的问题, 使用时加 -P 指定 profile 即可生效.</p>
<pre><code class="language-xml">&lt;profiles&gt;
  &lt;profile&gt;
    &lt;id&gt;dev&lt;/id&gt;
    &lt;activation&gt;
      &lt;property&gt;
        &lt;name&gt;environment&lt;/name&gt;
        &lt;value&gt;dev&lt;/value&gt;
      &lt;/property&gt;
    &lt;/activation&gt;
	&lt;id&gt;release&lt;/id&gt;
    &lt;activation&gt;
      &lt;property&gt;
        &lt;name&gt;environment&lt;/name&gt;
        &lt;value&gt;release&lt;/value&gt;
      &lt;/property&gt;
    &lt;/activation&gt;
    ...
  &lt;/profile&gt;
&lt;/profiles&gt;
</code></pre>
<p>允许使用参数方式指定Profile 运行:</p>
<pre><code class="language-bash">mvn groupId:artifactId:goal -Denvironment=dev
# 或者
mvn groupId:artifactId:goal -Pdev
</code></pre>
<p>可以使用 <code>&lt;activeProfiles&gt;</code> 指定默认构建的profile:</p>
<pre><code class="language-xml">&lt;settings&gt;
  ...
  &lt;activeProfiles&gt;
    &lt;activeProfile&gt;profile-1&lt;/activeProfile&gt;
  &lt;/activeProfiles&gt;
  ...
&lt;/settings&gt;
</code></pre>
<h3 id="项目属性">项目属性</h3>
<p>Maven 允许在 POM 中同时使用自己的和预先定义的变量,做到重用变量的作用, 如要访问变量 <code>project.version</code>,就可以这样引用.但要注意的是变量的定义优先级是子 POM 文件高,如果子 POM 文件与父 POM 文件存在想通变量的定义,那么最终采用的是子 POM 文件中的.</p>
<pre><code> &lt;version&gt;${project.version}&lt;/version&gt;
</code></pre>
<p>自定义属性定义的位置在 POM 文件的 properties 节点下,具体使用方式如下</p>
<pre><code class="language-xml">&lt;project&gt;
  ...
  &lt;properties&gt;
    &lt;mavenVersion&gt;2.1&lt;/mavenVersion&gt;
  &lt;/properties&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
      &lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;
      &lt;version&gt;${mavenVersion}&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  ...
&lt;/project&gt;
</code></pre>
<p>Maven预定义的变量:</p>
<ul>
<li>project.basedir 当前项目所在目录路径</li>
<li>project.baseUri 当前项目所在目录的 URI 表示</li>
<li>maven.build.timestamp  表示构建生成的时间戳,可以通过 <code>maven.build.timestamp.format</code>定义格式</li>
</ul>
<h2 id="结语">结语</h2>
<p>本文主要介绍了 Maven 作为主流构建工具的优势和特点,介绍其 POM 文件和常用节点的用法.</p>
<h4 id="参考">参考</h4>
<ul>
<li>http://maven.apache.org/</li>
<li>http://maven.apache.org/guides/getting-started/index.html</li>
</ul>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://wrcj12138aaa.github.io//tag/BSi-UaPL6k" class="tag">
                    构建工具
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://wrcj12138aaa.github.io//post/20181018-Maven 常用命令">
                  <h3 class="post-title">
                    Java 修炼之道:Maven 常用命令清单
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '2ba76d6fe50ad2b384eb',
        clientSecret: '90db763ed48942571725d6aef11229900c8bb656',
        repo: 'wrcj12138aaa.github.io',
        owner: 'wrcj12138aaa',
        admin: ['wrcj12138aaa'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
